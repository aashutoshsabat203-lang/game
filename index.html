<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virar Storm Rescue</title>
    <style>
        body { margin:0; overflow:hidden; background:#334155; }
        canvas { display:block; margin:0 auto; }
    </style>
</head>
<body>
    <script src="phaser.min.js"></script>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            physics: { default: 'arcade', arcade: { debug: false } },
            scene: { preload, create, update }
        };
        const game = new Phaser.Game(config);

        let player, vehicle, cursors;
        let civilians, enemies;
        let health = 100;
        let civiliansRescued = 0;
        let missionText, healthText;

        function preload() {
            this.load.image('player','assets/player.png');
            this.load.image('vehicle','assets/vehicle.png');
            this.load.image('civilian','assets/civilian.png');
            this.load.image('enemy','assets/enemy.png');
        }

        function create() {
            player = this.physics.add.sprite(400,300,'player');
            player.setCollideWorldBounds(true);

            cursors = this.input.keyboard.createCursorKeys();

            vehicle = this.physics.add.sprite(500,500,'vehicle');
            vehicle.setCollideWorldBounds(true);

            civilians = this.physics.add.group();
            civilians.create(200, 200, 'civilian');
            civilians.create(600, 400, 'civilian');

            enemies = this.physics.add.group();
            enemies.create(300, 300, 'enemy');
            enemies.create(500, 200, 'enemy');

            missionText = this.add.text(10,10,'Civilians Rescued: 0/2',{ font:'16px Arial', fill:'#fff' });
            healthText = this.add.text(10,30,'Health: 100%',{ font:'16px Arial', fill:'#fff' });

            this.physics.add.overlap(player, civilians, rescueCivilian, null, this);
            this.physics.add.overlap(player, enemies, hitEnemy, null, this);
        }

        function update() {
            player.setVelocity(0);
            const speed = 200;

            if(cursors.left.isDown) player.setVelocityX(-speed);
            if(cursors.right.isDown) player.setVelocityX(speed);
            if(cursors.up.isDown) player.setVelocityY(-speed);
            if(cursors.down.isDown) player.setVelocityY(speed);
        }

        function rescueCivilian(player, civilian) {
            civilian.destroy();
            civiliansRescued++;
            missionText.setText(`Civilians Rescued: ${civiliansRescued}/2`);
            if(civiliansRescued>=2) alert('Mission Complete!');
        }

        function hitEnemy(player, enemy) {
            health -= 20;
            healthText.setText(`Health: ${health}%`);
            if(health<=0) alert('Game Over!');
        }
    </script>
</body>
</html>
